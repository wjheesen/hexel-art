(()=>{"use strict";var t={441:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ColorBuffer=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.withLength=function(t){return new this(new Uint8Array(4*t))},Object.defineProperty(e.prototype,"componentLength",{get:function(){return 4},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r",{get:function(){return this.getComponent(0)},set:function(t){this.setComponent(0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this.getComponent(1)},set:function(t){this.setComponent(1,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this.getComponent(2)},set:function(t){this.setComponent(2,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return this.getComponent(3)},set:function(t){this.setComponent(3,t)},enumerable:!1,configurable:!0}),e.prototype.newStruct=function(t){return new e(t)},e}(r(457).StructBuffer);e.ColorBuffer=i},628:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Mat2dBuffer=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.withLength=function(t){return new this(new Float32Array(6*t))},Object.defineProperty(e.prototype,"componentLength",{get:function(){return 6},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c1r1",{get:function(){return this.getComponent(0)},set:function(t){this.setComponent(0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c1r2",{get:function(){return this.getComponent(1)},set:function(t){this.setComponent(1,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c2r1",{get:function(){return this.getComponent(2)},set:function(t){this.setComponent(2,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c2r2",{get:function(){return this.getComponent(3)},set:function(t){this.setComponent(3,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c3r1",{get:function(){return this.getComponent(4)},set:function(t){this.setComponent(4,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c3r2",{get:function(){return this.getComponent(5)},set:function(t){this.setComponent(5,t)},enumerable:!1,configurable:!0}),e.prototype.newStruct=function(t){return new e(t)},e}(r(457).StructBuffer);e.Mat2dBuffer=i},466:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StructBuffer=void 0;var r=function(){function t(t){this.data=t,this.dataPosition=0}return Object.defineProperty(t.prototype,"position",{get:function(){return this.dataPosition/this.componentLength},set:function(t){this.assertValidIndex(t),this.dataPosition=t*this.componentLength},enumerable:!1,configurable:!0}),t.prototype.assertValidIndex=function(t){if(t<0||t>=this.length)throw"Index "+t+" is out of bounds"},t.prototype.at=function(t){return this.position=t,this},Object.defineProperty(t.prototype,"length",{get:function(){return this.data.length/this.componentLength},enumerable:!1,configurable:!0}),t.prototype.getComponent=function(t){return this.data[this.dataPosition+t]},t.prototype.setComponent=function(t,e){return this.data[this.dataPosition+t]=e},t.prototype.get=function(t){this.assertValidIndex(t);var e=this.getStructData(t);return this.newStruct(e)},t.prototype.getStructData=function(t){var e=t*this.componentLength,r=e+this.componentLength;return this.data.subarray(e,r)},t}();e.StructBuffer=r},936:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},677:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Vec2Buffer=void 0;var i=r(457),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.withLength=function(t){return new this(new Float32Array(2*t))},Object.defineProperty(e.prototype,"componentLength",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.getComponent(0)},set:function(t){this.setComponent(0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.getComponent(1)},set:function(t){this.setComponent(1,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return 0==this.length?i.Rect.empty():this.measureBounds(this.at(0))},enumerable:!1,configurable:!0}),e.prototype.measureBounds=function(t){for(var e=i.Rect.dimensions(t.x,t.y,0,0),r=1;r<this.length;r++)e.unionPoint(this.at(r));return e},e.prototype.newStruct=function(t){return new e(t)},e.prototype.containsPoint=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=this.length-e);for(var o=!1,n=this.at(e+r-1),i=n.x,a=n.y;r-- >0;){var c=this.at(e++),s=c.x,u=c.y;a>t.y!=u>t.y&&t.x<(s-i)*(t.y-a)/(u-a)+i&&(o=!o),i=s,a=u}return o},e}(i.StructBuffer);e.Vec2Buffer=a},635:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},0:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PointerEventDetector=e.PointerEventListener=e.Pointer=void 0;var r=function(t,e,r,o,n,i,a){this.id=t,this.status=e,this.surface=r,this.position=o,this.isPrimary=n,this.isDown=i,this.activePointers=a};e.Pointer=r;var o=function(){function t(){}return t.prototype.wherePointer=function(t){return!0},t.prototype.onPointerDown=function(t){},t.prototype.onPointerMove=function(t){},t.prototype.onPointerUp=function(t){},t.prototype.onPointerCancel=function(t){},t}();e.PointerEventListener=o;var n=function(){function t(t){var e=this;this.surface=t,this.activePointers=[],this.listeners=[],this.onPointerDown=function(t){var r=e.addPointer(t,0);e.dispatchEvent(r,(function(t){return t.onPointerDown(r)}))},this.onPointerMove=function(t){var r=e.addPointer(t,1);e.dispatchEvent(r,(function(t){return t.onPointerMove(r)}))},this.onPointerUp=function(t){var r=e.addPointer(t,2);e.dispatchEvent(r,(function(t){return t.onPointerUp(r)})),e.removePointer(r)},this.onPointerCancel=function(t){var r=e.addPointer(t,2);e.dispatchEvent(r,(function(t){return t.onPointerCancel(r)})),e.removePointer(r)}}return t.prototype.startListening=function(){var t=this.surface.canvasEl;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),t.addEventListener("pointercancel",this.onPointerCancel)},t.prototype.stopListening=function(){var t=this.surface.canvasEl;t.removeEventListener("pointerdown",this.onPointerDown),t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),t.removeEventListener("pointercancel",this.onPointerCancel)},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.dispatchEvent=function(t,e){this.listeners.filter((function(e){return e.wherePointer(t)})).forEach(e)},t.prototype.addPointer=function(t,e){var r,o=this.getPointerIndex(t.pointerId),n=0==e||!!(null===(r=this.activePointers[o])||void 0===r?void 0:r.isDown),i=this.newPointer(t,e,n);return this.surface.canvasEl.setPointerCapture(i.id),this.activePointers[o]=i,i},t.prototype.newPointer=function(t,e,o){return new r(t.pointerId,e,this.surface,this.surface.mapScreenPointToWorld(t),t.isPrimary,o,this.activePointers)},t.prototype.getPointerIndex=function(t){for(var e=0;e<this.activePointers.length;e++)if(this.activePointers[e].id==t)return e;return this.activePointers.length},t.prototype.removePointer=function(t){this.surface.canvasEl.releasePointerCapture(t.id),this.activePointers.splice(this.getPointerIndex(t.id),1)},t}();e.PointerEventDetector=n},218:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},501:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WheelEventDetector=e.Wheel=void 0;var r=function(t,e,r){this.deltaY=t,this.surface=e,this.position=r};e.Wheel=r;var o=function(){function t(t){var e=this;this.surface=t,this.listeners=[],this.onWheel=function(t){t.preventDefault();var o=new r(t.deltaY,e.surface,e.surface.mapScreenPointToWorld(t));e.listeners.forEach((function(t){return t.onWheel(o)}))}}return t.prototype.startListening=function(){this.surface.canvasEl.addEventListener("wheel",this.onWheel)},t.prototype.stopListening=function(){this.surface.canvasEl.removeEventListener("wheel",this.onWheel)},t.prototype.addListener=function(t){this.listeners.push(t)},t}();e.WheelEventDetector=o},457:function(t,e,r){var o=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){void 0===o&&(o=r),t[o]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||o(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.Mat4=e.Vec2=e.Point=e.Mat2d=e.Ellipse=e.ColorF=e.Color=void 0,e.Color=r(497),e.ColorF=r(82),e.Ellipse=r(809),n(r(561),e),e.Mat2d=r(800),e.Point=r(71),n(r(523),e),e.Vec2=r(900),e.Mat4=r(746),n(r(466),e),n(r(441),e),n(r(628),e),n(r(936),e),n(r(677),e),n(r(635),e),n(r(385),e),n(r(908),e),n(r(350),e),n(r(96),e),n(r(584),e),n(r(512),e),n(r(913),e),n(r(387),e),n(r(218),e),n(r(393),e),n(r(138),e),n(r(749),e),n(r(0),e),n(r(501),e),n(r(9),e),n(r(343),e),n(r(357),e),n(r(807),e)},387:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.EllipseModel=void 0;var i=r(457),a=r(157),c=function(t){function e(e){return t.call(this,a.EllipseProgram.mesh,e)||this}return n(e,t),e.measureBoundaries=function(t){var e=t.c1r1,r=t.c2r1,o=t.c3r1,n=t.c1r2,a=t.c2r2,c=t.c3r2,s=e*e,u=r*r,f=n*n,h=a*a,p=e*n+r*a,l=s+u-f-h,d=.5*Math.atan2(2*p,l),v=Math.pow(Math.cos(d),2),y=Math.pow(Math.sin(d),2),m=s+u+f+h,g=Math.sqrt(l*l+4*p*p),b=.5*(m+g),P=.5*(m-g),_=Math.sqrt(b*v+P*y),x=Math.sqrt(b*y+P*v);return i.Rect.copy({left:o-_,right:o+_,top:c+x,bottom:c-x})},Object.defineProperty(e.prototype,"bounds",{get:function(){return e.measureBoundaries(this.matrix)},set:function(t){this.transform(i.Mat2d.rectToRect(this.bounds,t))},enumerable:!1,configurable:!0}),e.prototype.contains=function(t){var e=this.mapPointToModelSpace(t);return!!this.mesh.bounds.containsPoint(e)&&i.Vec2.length2(e)<=1},e}(i.PolygonModel);e.EllipseModel=c},385:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Mesh=void 0;e.Mesh=function(t,e){this.vertices=t,this.indices=e,this.bounds=this.vertices.bounds}},512:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var o=r(457),n=function(){function t(t){this.matrix=t}return Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.matrix.c3r1,y:this.matrix.c3r2}},set:function(t){var e=t.x,r=t.y;this.matrix.c3r1=e,this.matrix.c3r2=r},enumerable:!1,configurable:!0}),t.prototype.mapPointToWorldSpace=function(t,e){return void 0===e&&(e={}),o.Mat2d.mapPoint(this.matrix,t,e)},t.prototype.mapPointToModelSpace=function(t,e){return void 0===e&&(e={}),o.Mat2d.mapPoint(o.Mat2d.invert(this.matrix),t,e)},t.prototype.transform=function(t){o.Mat2d.concat(t,this.matrix,this.matrix)},t.prototype.translate=function(t){this.transform(o.Mat2d.translate(t))},t.prototype.scale=function(t){this.transform(o.Mat2d.pivot(o.Mat2d.scale(t),this.center))},t.prototype.stretch=function(t){this.transform(o.Mat2d.pivot(o.Mat2d.stretch(t),this.center))},t.prototype.rotate=function(t){this.transform(o.Mat2d.pivot(o.Mat2d.rotate(t),this.center))},t}();e.Model=n},908:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonMesh=void 0;var i=r(457),a=function(t){function e(){var r=null!==t&&t.apply(this,arguments)||this;return r.miters=e.miters(r.vertices),r}return n(e,t),e.regularPolygon=function(t,r){return void 0===r&&(r=!1),new e(this.regularVertices(t,r),this.regularIndices(t))},e.regularVertices=function(t,e){void 0===e&&(e=!1);var r=i.Vec2Buffer.withLength(t),o=2*Math.PI/t,n=i.Mat2d.rotate(o),a=r.get(0);a.y=1,e&&i.Mat2d.mapPoint(i.Mat2d.rotate(o/2),a,a);for(var c=1;c<t;c++)i.Mat2d.mapPoint(n,r.get(c-1),r.at(c));return r},e.regularIndices=function(t){for(var e=new Uint16Array(3*(t-2)),r=0;r<t;r++)e[3*r+1]=r+1,e[3*r+2]=r+2;return e},e.rectangle=function(t){var r=e.rectangleVertices(t),o=e.regularIndices(4);return new e(r,o)},e.rectangleVertices=function(t){var e=i.Vec2Buffer.withLength(4);return t.topLeft(e.at(0)),t.bottomLeft(e.at(1)),t.bottomRight(e.at(2)),t.topRight(e.at(3)),e},e.star=function(t,r){var o=e.starVertices(t,r),n=e.starIndices(t);return new e(o,n)},e.starVertices=function(t,e){var r=i.Vec2Buffer.withLength(t+t),o=2*Math.PI/t,n=i.Mat2d.rotate(o);r.y=1,i.Mat2d.mapPoint(i.Mat2d.rotate(.5*o),{x:0,y:e},r.at(1));for(var a=2;a<r.length;a++)i.Mat2d.mapPoint(n,r.get(a-2),r.at(a));return r},e.starIndices=function(t){for(var e=3*(t-2),r=3*t,o=new Uint16Array(e+r),n=1,i=3,a=5,c=0;c<e;i+=2,a+=2)o[c++]=n,o[c++]=i,o[c++]=a;for(n=2*t-1,i=0,a=1,c=0;c<r;c++,n=a++,i=a++)o[c++]=n,o[c++]=i,o[c++]=a;return o},e.miters=function(t){for(var e=t.length,r=e-1,o=i.Vec2Buffer.withLength(e),n=i.Vec2.copy(t.at(r)),a=i.Vec2.copy(t.at(0)),c=i.Vec2.fromPointToPoint(n,a),s={},u=0;u<e;u++)i.Vec2.copy(a,n),i.Vec2.copy(t.at((u+1)%r),a),i.Vec2.fromPointToPoint(n,a,s),i.Vec2.miter(c,s,1,3,o.at(u)),i.Vec2.copy(s,c);return o},e.prototype.containsPoint=function(t){return this.vertices.containsPoint(t)},e}(i.Mesh);e.PolygonMesh=a},913:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonModel=void 0;var i=r(457),a=function(t){function e(e,r){void 0===r&&(r=i.Mat2d.identity());var o=t.call(this,r)||this;return o.mesh=e,o}return n(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){for(var t=this.mesh.vertices,e=this.mapPointToWorldSpace(t.at(0)),r=e.x,o=e.y,n=i.Rect.dimensions(r,o,0,0),a=1;a<t.length;a++)n.unionPoint(this.mapPointToWorldSpace(t.at(a)));return n},set:function(t){this.transform(i.Mat2d.rectToRect(this.bounds,t))},enumerable:!1,configurable:!0}),e.prototype.vertexAt=function(t,e){return void 0===e&&(e={}),this.mapPointToWorldSpace(this.mesh.vertices.at(t),e)},e.prototype.containsPoint=function(t){return this.mesh.containsPoint(this.mapPointToModelSpace(t))},e.prototype.scaleToFit=function(t,e){void 0===e&&(e=2),i.Mat2d.rectToRect(this.mesh.bounds,t,e,this.matrix)},e.prototype.stretchAcross=function(t){var e=t.p1,r=t.p2,o=this.mesh.bounds,n=o.centerX,a=i.Vec2.fromPointToPoint({x:n,y:o.top},e),c=i.Mat2d.translate(a,this.matrix),s=i.Mat2d.mapPoint(c,{x:n,y:o.bottom}),u=i.Mat2d.stretchRotateToPoint(s,r,e);this.transform(u)},e}(i.Model);e.PolygonModel=a},157:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.EllipseProgram=void 0;var i=r(457),a=r(706),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.create=function(t){var r=new e;return r.location=t.createProgramFromSources(a.vertex,a.fragment),r.uniforms=t.getUniformLocationMap(r.location,a.uniformRenaming),r.attribs=t.getAttributeLocationMap(r.location,a.attributeRenaming),r.positionBuffer=t.createArrayBuffer(e.mesh.vertices.data),r.matrixBuffer=t.createBuffer(),r},e.prototype.onAttach=function(t){var e=t.gl,r=t.angleExt,o=this.attribs.model,n=o+1,i=this.attribs.offset;e.enable(e.BLEND),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.matrixBuffer),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(i),r.vertexAttribDivisorANGLE(o,1),r.vertexAttribDivisorANGLE(n,1),r.vertexAttribDivisorANGLE(i,1)},e.prototype.onDetach=function(t){var e=t.angleExt,r=this.attribs.model,o=r+1,n=this.attribs.offset;e.vertexAttribDivisorANGLE(r,0),e.vertexAttribDivisorANGLE(o,0),e.vertexAttribDivisorANGLE(n,0)},e.prototype.draw=function(t,e){var r=t.gl,o=t.angleExt,n=t.camera;t.useProgram(this),this.loadProjection(r,n.matrix),this.loadMatrices(r,e),this.loadFillColor(r),this.loadStrokeColor(r),this.loadLineWidth(r),o.drawArraysInstancedANGLE(r.TRIANGLE_FAN,0,4,e.length)},e.prototype.loadProjection=function(t,e){t.uniformMatrix4fv(this.uniforms.projection,!1,e)},e.prototype.loadMatrices=function(t,e){var r=this.attribs.model,o=r+1,n=this.attribs.offset;t.bufferData(t.ARRAY_BUFFER,e.data,t.DYNAMIC_DRAW),t.vertexAttribPointer(r,2,t.FLOAT,!1,24,0),t.vertexAttribPointer(o,2,t.FLOAT,!1,24,8),t.vertexAttribPointer(n,2,t.FLOAT,!1,24,16)},e.prototype.loadFillColor=function(t){t.uniform4fv(this.uniforms.fillColor,this.fillColor.data)},e.prototype.loadStrokeColor=function(t){t.uniform4fv(this.uniforms.strokeColor,this.strokeColor.data)},e.prototype.loadLineWidth=function(t){t.uniform1f(this.uniforms.lineWidth,this.lineWidth)},e.mesh=i.PolygonMesh.rectangle(i.Rect.dimensions(-1,1,2,2)),e}(i.Program);e.EllipseProgram=c},584:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.FillProgram=void 0;var i=r(457),a=r(871),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.create=function(t,r){var o=new e;return o.location=t.createProgramFromSources(a.vertex,a.fragment),o.uniforms=t.getUniformLocationMap(o.location,a.uniformRenaming),o.attribs=t.getAttributeLocationMap(o.location,a.attributeRenaming),o.indexBuffer=t.createIndexBuffer(r),o.positionBuffer=t.createVertexBuffer(r),o.matrixBuffer=t.createBuffer(),o.dynamicBuffer=t.createBuffer(),o},e.prototype.onAttach=function(t){var e=t.gl,r=t.angleExt,o=this.attribs.model,n=o+1,i=this.attribs.offset;e.enable(e.BLEND),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.enableVertexAttribArray(this.attribs.position),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(i),r.vertexAttribDivisorANGLE(o,1),r.vertexAttribDivisorANGLE(n,1),r.vertexAttribDivisorANGLE(i,1)},e.prototype.onDetach=function(t){var e=t.angleExt,r=this.attribs.model,o=r+1,n=this.attribs.offset;e.vertexAttribDivisorANGLE(r,0),e.vertexAttribDivisorANGLE(o,0),e.vertexAttribDivisorANGLE(n,0)},e.prototype.draw=function(t,e,r){var o=t.gl,n=t.angleExt;t.useProgram(this),this.loadProjection(o,t.camera.matrix),this.loadColor(o),this.loadVertices(o,e),this.loadMatrices(o,r),e.indices?n.drawElementsInstancedANGLE(o.TRIANGLES,e.indices.length,o.UNSIGNED_SHORT,e.indexBufferOffset,r.length):n.drawArraysInstancedANGLE(o.TRIANGLES,0,e.vertices.length,r.length)},e.prototype.drawTriangleStrip=function(t,e,r){var o=t.gl,n=t.angleExt;t.useProgram(this),this.loadProjection(o,t.camera.matrix),this.loadColor(o),this.loadLineVertices(o,e),this.loadMatrices(o,r),n.drawArraysInstancedANGLE(o.TRIANGLE_STRIP,0,e.length,r.length)},e.prototype.loadProjection=function(t,e){t.uniformMatrix4fv(this.uniforms.projection,!1,e)},e.prototype.loadColor=function(t){t.uniform4fv(this.uniforms.color,this.color.data)},e.prototype.loadVertices=function(t,e){t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.vertexAttribPointer(this.attribs.position,2,t.FLOAT,!1,0,e.vertexBufferOffset)},e.prototype.loadLineVertices=function(t,e){t.bindBuffer(t.ARRAY_BUFFER,this.dynamicBuffer),t.bufferData(t.ARRAY_BUFFER,e.data,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.attribs.position,2,t.FLOAT,!1,0,0)},e.prototype.loadMatrices=function(t,e){var r=this.attribs.model,o=r+1,n=this.attribs.offset;t.bindBuffer(t.ARRAY_BUFFER,this.matrixBuffer),t.bufferData(t.ARRAY_BUFFER,e.data,t.DYNAMIC_DRAW),t.vertexAttribPointer(r,2,t.FLOAT,!1,24,0),t.vertexAttribPointer(o,2,t.FLOAT,!1,24,8),t.vertexAttribPointer(n,2,t.FLOAT,!1,24,16)},e}(i.Program);e.FillProgram=c},350:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramUtil=void 0;var r=function(){function t(t){this.gl=t}return t.prototype.createBuffer=function(){return this.gl.createBuffer()},t.prototype.createArrayBuffer=function(t,e){void 0===e&&(e=this.gl.STATIC_DRAW);var r=this.gl,o=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,t,e),o},t.prototype.createElementBuffer=function(t,e){void 0===e&&(e=this.gl.STATIC_DRAW);var r=this.gl,o=r.createBuffer();return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t,e),o},t.prototype.createVertexBuffer=function(t){for(var e=this.gl,r=this.sizeOfVertexBuffer(t),o=this.createArrayBuffer(r,e.STATIC_DRAW),n=0,i=0,a=t;i<a.length;i++){var c=a[i],s=c.vertices.data;e.bufferSubData(e.ARRAY_BUFFER,n,s),c.vertexBufferOffset=n,n+=s.byteLength}return o},t.prototype.sizeOfVertexBuffer=function(t){return t.reduce((function(t,e){return t+e.vertices.data.byteLength}),0)},t.prototype.createIndexBuffer=function(t){for(var e=this.gl,r=this.sizeOfIndexBuffer(t),o=this.createElementBuffer(r,e.STATIC_DRAW),n=0,i=0,a=t;i<a.length;i++){var c=a[i],s=c.indices;e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,n,s),c.indexBufferOffset=n,n+=s.byteLength}return o},t.prototype.sizeOfIndexBuffer=function(t){return t.reduce((function(t,e){return t+e.indices.byteLength}),0)},t.prototype.createMiterBuffer=function(t){for(var e,r=this.gl,o=this.sizeOfStrokeVertexBuffer(t),n=this.createArrayBuffer(o),i=0,a=0,c=t;a<c.length;a++){var s=c[a];s.miterBufferOffset=i,i+=s.vertices.data.byteLength,e=s.miters.data,r.bufferSubData(r.ARRAY_BUFFER,i,e),i+=e.byteLength}return n},t.prototype.createStrokeIndexBuffer=function(t){for(var e=this.lengthOfStrokeIndexArray(t),r=new Uint16Array(e),o=0,n=0,i=t;n<i.length;n++){var a=i[n],c=a.vertices.length;a.strokeIndexCount=2*(c+1),a.strokeIndexBufferOffset=2*o;for(var s=0;s<c;s++)r[o++]=s+c,r[o++]=s;r[o++]=c,r[o++]=0}return this.createElementBuffer(r,this.gl.STATIC_DRAW)},t.prototype.lengthOfStrokeIndexArray=function(t){return t.reduce((function(t,e){return t+2*(e.vertices.length+1)}),0)},t.prototype.createStrokeVertexBuffer=function(t){for(var e=this.gl,r=this.sizeOfStrokeVertexBuffer(t),o=this.createArrayBuffer(r),n=0,i=0,a=t;i<a.length;i++){var c=a[i],s=c.vertices.data;e.bufferSubData(e.ARRAY_BUFFER,n,s),c.strokeVertexBufferOffset=n,n+=s.byteLength,e.bufferSubData(e.ARRAY_BUFFER,n,s),n+=s.byteLength}return o},t.prototype.sizeOfStrokeVertexBuffer=function(t){return this.sizeOfStrokeVertexBuffer(t)+t.reduce((function(t,e){return t+e.miters.data.byteLength}),0)},t.prototype.createProgramFromSources=function(t,e){var r=this.compileShader(t,this.gl.VERTEX_SHADER),o=this.compileShader(e,this.gl.FRAGMENT_SHADER);return this.createProgramFromShaders(r,o)},t.prototype.createProgramFromShaders=function(t,e){var r=this.gl,o=r.createProgram();if(r.attachShader(o,t),r.attachShader(o,e),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw"program filed to link:"+r.getProgramInfoLog(o);return o},t.prototype.compileShader=function(t,e){var r=this.gl,o=r.createShader(e);if(r.shaderSource(o,t),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS))throw"could not compile shader:"+r.getShaderInfoLog(o);return o},t.prototype.getUniformLocationMap=function(t,e){var r=this.gl,o={};if(e)for(var n in e)o[n]=r.getUniformLocation(t,e[n]);else for(var i=r.getProgramParameter(t,r.ACTIVE_UNIFORMS),a=0;a<i;a++){var c=r.getActiveUniform(t,a).name;o[c]=r.getUniformLocation(t,c)}return o},t.prototype.getAttributeLocationMap=function(t,e){var r=this.gl,o={};if(e)for(var n in e)o[n]=r.getAttribLocation(t,e[n]);else for(var i=r.getProgramParameter(t,r.ACTIVE_ATTRIBUTES),a=0;a<i;a++){var c=r.getActiveAttrib(t,a).name;o[c]=r.getAttribLocation(t,c)}return o},t}();e.ProgramUtil=r},96:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Program=void 0;e.Program=function(){}},393:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var o=r(457),n=function(){function t(t,e,r){this.world=t,this.minZoom=e,this.maxZoom=r,this.matrix=new Float32Array(16),this.view=o.Rect.copy(this.world),this.position=this.world.center(),this.zoom=1}return t.prototype.setViewport=function(t,e){var r=t/e,n=this.world.aspect,i=o.Mat2d.scale(n<r?{x:r/n,y:1}:{x:1,y:n/r});o.Mat2d.concat(o.Mat2d.stretch(1/this.zoom),i,i),o.Mat2d.concat(o.Mat2d.translate(this.position),i,i),o.Mat2d.mapRect(i,this.world,this.view),this.updateMatrix()},t.prototype.offset=function(t){var e=o.Vec2.add(t,this.position),r=(this.zoom-this.minZoom)/this.zoom,n=o.Mat2d.mapRect(o.Mat2d.stretch(r),this.world),i=o.Rect.copy(n);i.offset(o.Vec2.rotate180(n.center()));var a=o.Vec2.copy(t);return e.x<i.left?a.x=i.left-this.position.x:e.x>i.right&&(a.x=i.right-this.position.x),e.y<i.bottom?a.y=i.bottom-this.position.y:e.y>i.top&&(a.y=i.top-this.position.y),this.view.offset(a),o.Vec2.add(this.position,a,this.position),this.updateMatrix(),a},t.prototype.zoomIn=function(t){var e,r=this.zoom*t;r<this.minZoom?(e=this.minZoom/this.zoom,this.zoom=this.minZoom):r>this.maxZoom?(e=this.maxZoom/this.zoom,this.zoom=this.maxZoom):(e=t,this.zoom=r);var n=o.Mat2d.pivot(o.Mat2d.stretch(1/e),this.position);return o.Mat2d.mapRect(n,this.view,this.view),this.updateMatrix(),e},t.prototype.zoomToPoint=function(t,e){var r=this.view,n=(e.x-r.left)/r.width,i=(e.y-r.bottom)/r.height,a=this.zoomIn(t),c={x:r.left+n*r.width,y:r.bottom+i*r.height},s=o.Vec2.fromPointToPoint(c,e);return{scale:a,offset:this.offset(s)}},t.prototype.updateMatrix=function(){o.Mat4.ortho(this.view,.1,10,this.matrix)},t}();e.Camera=n},138:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;var r=function(){function t(t,e){this.gl=t,this.camera=e,this.angleExt=this.gl.getExtension("ANGLE_instanced_arrays")}return t.prototype.onSurfaceChange=function(t,e){this.gl.viewport(0,0,t,e),this.camera.setViewport(t,e)},t.prototype.useProgram=function(t){this.currentProgram!==t&&this.attachProgram(t)},t.prototype.attachProgram=function(t){this.gl.useProgram(t.location),this.currentProgram&&this.currentProgram.onDetach(this),t.onAttach(this),this.currentProgram=t},t}();e.Renderer=r},749:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Surface=void 0;var o=r(457),n=r(0),i=r(501),a=function(){function t(t,e,r){var o=this;this.canvasEl=t,this.renderer=e,this.scene=r,this.clientRect=this.canvasEl.getBoundingClientRect(),this.hasRenderRequest=!1,this.checkRender=function(){o.resize(),o.onAnimationFrame(),requestAnimationFrame(o.checkRender)}}return t.prototype.startRenderLoop=function(){this.requestRender(),this.checkRender()},t.prototype.requestRender=function(){this.hasRenderRequest=!0},t.prototype.onAnimationFrame=function(){this.hasRenderRequest&&(this.scene.draw(this.renderer),this.hasRenderRequest=!1)},t.prototype.resize=function(t,e){void 0===t&&(t=this.canvasEl.clientWidth),void 0===e&&(e=this.canvasEl.clientHeight),this.canvasEl.width===t&&this.canvasEl.height===e||(this.canvasEl.width=t,this.canvasEl.height=e,this.clientRect=this.canvasEl.getBoundingClientRect(),this.renderer.onSurfaceChange(t,e),this.requestRender())},t.prototype.startDetectingPointerEvents=function(){var t=new n.PointerEventDetector(this);return t.startListening(),t},t.prototype.startDetectingWheelEvents=function(){var t=new i.WheelEventDetector(this);return t.startListening(),t},t.prototype.pan=function(t){var e=this.renderer.camera.offset(t);return 0!=o.Vec2.length2(e)&&this.requestRender(),e},t.prototype.zoomIn=function(t){1!=this.renderer.camera.zoomIn(t)&&this.requestRender()},t.prototype.zoomOut=function(t){this.zoomIn(1/t)},t.prototype.zoomToPoint=function(t,e){var r=this.renderer.camera.zoomToPoint(t,e);return 1==r.scale&&0==o.Vec2.length2(r.offset)||this.requestRender(),r},t.prototype.mapScreenPointToCanvas=function(t){return{x:t.clientX-this.clientRect.left,y:t.clientY-this.clientRect.top}},t.prototype.mapScreenPointToNdc=function(t){return this.mapCanvasPointToNdc(this.mapScreenPointToCanvas(t))},t.prototype.mapScreenPointToWorld=function(t){return this.mapNdcToWorld(this.mapScreenPointToNdc(t))},t.prototype.mapCanvasPointToNdc=function(t){var e=this.clientRect,r=e.width,o=e.height;return{x:t.x/r,y:(o-t.y)/o}},t.prototype.mapNdcToWorld=function(t){var e=this.renderer.camera.view;return{x:e.left+t.x*e.width,y:e.bottom+t.y*e.height}},t}();e.Surface=a},706:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.uniformRenaming=e.attributeRenaming=e.fragment=e.vertex=void 0,e.vertex="precision mediump float;uniform mat4 z;uniform float s;attribute mat2 c;attribute vec2 v,h;varying vec2 f,e;mat2 i(float a){float b=sin(a),d=cos(a);return mat2(d,b,-b,d);}void main(){float j=c[0].x,k=c[1].x,l=c[0].y,m=c[1].y,a=(j+m)/2.,b=(j-m)/2.,d=(l+k)/2.,g=(l-k)/2.,n=sqrt(a*a+g*g),o=sqrt(b*b+d*d),A=n+o,p=n-o,q=atan(d,b),r=atan(g,a),w=(r-q)/2.,x=(r+q)/2.;mat2 t=i(x),u=i(w);t[1]*=sign(p),p=abs(p);vec2 y=t*(s*(u*h)),B=c*h+v+y;gl_Position=z*vec4(B,1.,1.),e=u*h,f=e*(1.+s/vec2(A,p));}",e.fragment="precision mediump float;uniform vec4 C,D;varying vec2 f,e;void main(){bool a=dot(f,f)<1.,b=dot(e,e)<1.;gl_FragColor=a?C:b?D:vec4(0.);}",e.attributeRenaming={model:"c",offset:"v",position:"h"},e.uniformRenaming={projection:"z",lineWidth:"s",fillColor:"C",strokeColor:"D"}},871:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.uniformRenaming=e.attributeRenaming=e.fragment=e.vertex=void 0,e.vertex="precision mediump float;uniform mat4 d;attribute mat2 a;attribute vec2 b,c;void main(){vec2 e=a*c+b;gl_Position=d*vec4(e,1.,1.);}",e.fragment="precision mediump float;uniform vec4 f;void main(){gl_FragColor=f;}",e.attributeRenaming={model:"a",offset:"b",position:"c"},e.uniformRenaming={projection:"d",color:"f"}},497:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.equals=e.isTransparent=e.isOpaque=e.blend=e.random=e.toArgbString=e.fromArgbString=e.toRgbaInt=e.fromRgbInt=e.fromRgbaInt=e.copy=void 0;var o=r(768);function n(t,e){return void 0===e&&(e={}),e.r=t>>24&255,e.g=t>>16&255,e.b=t>>8&255,e.a=t>>0&255,e}e.copy=function(t,e){return void 0===e&&(e={}),e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a,e},e.fromRgbaInt=n,e.fromRgbInt=function(t,e){return void 0===e&&(e={}),n(t<<8|255,e)},e.toRgbaInt=function(t){return(t.r<<24|t.g<<16|t.b<<8|t.a<<0)>>>0},e.fromArgbString=function(t,e){void 0===e&&(e={});var r="#"==t[0]?1:0;return e.a=parseInt(t.substr(r,2),16),e.r=parseInt(t.substr(r+2,2),16),e.g=parseInt(t.substr(r+4,2),16),e.b=parseInt(t.substr(r+6,2),16),e},e.toArgbString=function(t){return"#"+o.pad(t.a.toString(16))+o.pad(t.r.toString(16))+o.pad(t.g.toString(16))+o.pad(t.b.toString(16))},e.random=function(t){return void 0===t&&(t={}),t.r=o.randomByte(),t.g=o.randomByte(),t.b=o.randomByte(),t.a=void 0===t.a?255:t.a,t},e.blend=function(t,e,r){void 0===r&&(r={});var o=t.a+1,n=256-t.a;return r.r=o*t.r+n*e.r>>8,r.g=o*t.g+n*e.g>>8,r.b=o*t.b+n*e.b>>8,r.a=e.a,r},e.isOpaque=function(t){return 255===t.a},e.isTransparent=function(t){return 0===t.a},e.equals=function(t,e){return t.r==e.r&&t.g==e.g&&t.b==e.b&&t.a==e.a}},82:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.premultiplyAlpha=e.isOpaque=e.random=e.toColor=e.fromColor=e.equals=e.isTransparent=e.copy=void 0;var o=r(497);Object.defineProperty(e,"copy",{enumerable:!0,get:function(){return o.copy}}),Object.defineProperty(e,"isTransparent",{enumerable:!0,get:function(){return o.isTransparent}}),e.equals=function(t,e,r){return void 0===r&&(r=0),Math.abs(t.r-e.r)<=r&&Math.abs(t.g-e.g)<=r&&Math.abs(t.b-e.b)<=r},e.fromColor=function(t,e){return void 0===e&&(e={}),e.r=t.r/255,e.g=t.g/255,e.b=t.b/255,e.a=t.a/255,e},e.toColor=function(t,e){return void 0===e&&(e={}),e.r=255*t.r>>0,e.g=255*t.g>>0,e.b=255*t.b>>0,e.a=255*t.a>>0,e},e.random=function(t){return void 0===t&&(t={}),t.r=Math.random(),t.g=Math.random(),t.b=Math.random(),t.a=void 0===t.a?1:t.a,t},e.isOpaque=function(t){return 1===t.a},e.premultiplyAlpha=function(t,e){return void 0===e&&(e={}),e.r=t.r*t.a,e.g=t.g*t.a,e.b=t.b*t.a,e.a=1,e}},809:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.equals=e.containsPoint=e.fromRect=e.circle=e.copy=void 0;var o=r(457);function n(t,e){return void 0===e&&(e={}),e.rx=t.rx,e.ry=t.ry,e.c=o.Point.copy(t.c,e.c),e}e.copy=n,e.circle=function(t,e,r){return void 0===r&&(r={}),n({rx:t,ry:t,c:e},r)},e.fromRect=function(t,e){return void 0===e&&(e={}),n({rx:t.width/2,ry:t.height/2,c:t.center()},e)},e.containsPoint=function(t,e){var r=o.Vec2.fromPointToPoint(e,t.c),n=r.x/t.rx,i=r.y/t.ry;return n*n+i*i<=1},e.equals=function(t,e,r){return void 0===r&&(r=0),Math.abs(t.rx-e.rx)<=r&&Math.abs(t.ry-e.ry)<=r&&o.Point.equals(t.c,e.c,r)}},561:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LineSegment=void 0;var o=r(457),n=function(){function t(t,e){this.p1=t,this.p2=e}return Object.defineProperty(t.prototype,"midpoint",{get:function(){return o.Point.midpoint(this.p1,this.p2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return o.Point.distance(this.p1,this.p2)},enumerable:!1,configurable:!0}),t.prototype.containsPoint=function(t,e){void 0===e&&(e=0);var r=this.p1,n=o.Vec2.fromPointToPoint(this.p1,this.p2),i=-1,a=o.Vec2.fromPointToPoint(r,t),c=o.Vec2.length2(n);if(0!=c&&(i=o.Vec2.dot(n,a)/c),i<0||i>1)return!1;var s=o.Vec2.add(r,o.Vec2.multiply(n,i));return o.Point.distance2(s,t)<=e*e},t.prototype.copy=function(){return new t(o.Point.copy(this.p1),o.Point.copy(this.p2))},t.prototype.equals=function(t,e){return void 0===e&&(e=0),o.Point.equals(this.p1,t.p1,e)&&o.Point.equals(this.p2,t.p2,e)},t}();e.LineSegment=n},800:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.equals=e.mapRect=e.mapPoint=e.rectToRect=e.sinCos=e.stretchRotateToPoint=e.rotate=e.stretch=e.scaleToPoint=e.scale=e.translate=e.identity=e.conjugate=e.pivot=e.concat=e.determinant=e.invert=e.copy=void 0;var o=r(457);function n(t,e){void 0===e&&(e={});var r=i(t),o=t.c1r1,n=t.c2r1,a=t.c3r1,c=t.c1r2,s=t.c2r2,u=t.c3r2;return e.c1r1=s/r,e.c2r1=-n/r,e.c3r1=(n*u-a*s)/r,e.c1r2=-c/r,e.c2r2=o/r,e.c3r2=(c*a-o*u)/r,e}function i(t){return t.c1r1*t.c2r2-t.c2r1*t.c1r2}function a(t,e,r){void 0===r&&(r={});var o=t.c1r1*e.c1r1+t.c2r1*e.c1r2,n=t.c1r1*e.c2r1+t.c2r1*e.c2r2,i=t.c1r1*e.c3r1+t.c2r1*e.c3r2+t.c3r1,a=t.c1r2*e.c1r1+t.c2r2*e.c1r2,c=t.c1r2*e.c2r1+t.c2r2*e.c2r2,s=t.c1r2*e.c3r1+t.c2r2*e.c3r2+t.c3r2;return r.c1r1=o,r.c2r1=n,r.c3r1=i,r.c1r2=a,r.c2r2=c,r.c3r2=s,r}function c(t,e,r){return void 0===r&&(r={}),s(t,u(e),r)}function s(t,e,r){return void 0===r&&(r={}),a(e,a(t,n(e)),r)}function u(t,e){var r=t.x,o=t.y;return void 0===e&&(e={}),e.c1r1=1,e.c2r1=0,e.c3r1=r,e.c1r2=0,e.c2r2=1,e.c3r2=o,e}function f(t,e){var r=t.x,o=t.y;return void 0===e&&(e={}),e.c1r1=r,e.c2r1=0,e.c3r1=0,e.c1r2=0,e.c2r2=o,e.c3r2=0,e}function h(t,e){return void 0===e&&(e={}),f({x:t,y:t},e)}function p(t,e,r){return void 0===r&&(r={}),r.c1r1=e,r.c2r1=-t,r.c3r1=0,r.c1r2=t,r.c2r2=e,r.c3r2=0,r}function l(t,e){switch(e){case 0:return t.center();case 1:return t.bottomRight();default:return t.topLeft()}}function d(t,e,r){var o=e.x,n=e.y;return void 0===r&&(r={}),r.x=t.c1r1*o+t.c2r1*n+t.c3r1,r.y=t.c1r2*o+t.c2r2*n+t.c3r2,r}e.copy=function(t,e){return void 0===e&&(e={}),e.c1r1=t.c1r1,e.c2r1=t.c2r1,e.c3r1=t.c3r1,e.c1r2=t.c1r2,e.c2r2=t.c2r2,e.c3r2=t.c3r2,e},e.invert=n,e.determinant=i,e.concat=a,e.pivot=c,e.conjugate=s,e.identity=function(t){return void 0===t&&(t={}),t.c1r1=1,t.c2r1=0,t.c3r1=0,t.c1r2=0,t.c2r2=1,t.c3r2=0,t},e.translate=u,e.scale=f,e.scaleToPoint=function(t,e,r,n){void 0===n&&(n={});var i=o.Vec2.fromPointToPoint(r,t),a=o.Vec2.fromPointToPoint(r,e);return c(f({x:a.x/i.x,y:a.y/i.y},n),r,n)},e.stretch=h,e.rotate=function(t,e){return void 0===e&&(e={}),p(Math.sin(t),Math.cos(t),e)},e.stretchRotateToPoint=function(t,e,r,n){void 0===n&&(n={});var i=o.Vec2.fromPointToPoint(r,t),s=o.Vec2.fromPointToPoint(r,e),u=o.Vec2.length(i),f=o.Vec2.length(s),l=h(f/u),d=o.Vec2.divide(i,u),v=o.Vec2.divide(s,f);return c(a(l,p(o.Vec2.cross(d,v),o.Vec2.dot(d,v))),r,n)},e.sinCos=p,e.rectToRect=function(t,e,r,n){void 0===r&&(r=2),void 0===n&&(n={});var i={x:0,y:0},c=l(t,r),s=l(e,r);u(o.Vec2.fromPointToPoint(c,i),n);var p=e.width/t.width,d=e.height/t.height;return a(2==r?f({x:p,y:d}):h(Math.min(p,d)),n,n),a(u(o.Vec2.fromPointToPoint(i,s)),n,n)},e.mapPoint=d,e.mapRect=function(t,e,r){void 0===r&&(r=o.Rect.empty());var n=d(t,e.topLeft()),i=n.x,a=n.y,c=[e.bottomLeft(),e.bottomRight(),e.topRight()];r.left=r.right=i,r.top=r.bottom=a;for(var s=0,u=c;s<u.length;s++){var f=u[s];r.unionPoint(d(t,f))}return r},e.equals=function(t,e,r){return void 0===r&&(r=0),Math.abs(t.c1r1-e.c1r1)<=r&&Math.abs(t.c1r2-e.c1r2)<=r&&Math.abs(t.c2r1-e.c2r1)<=r&&Math.abs(t.c2r2-e.c2r2)<=r&&Math.abs(t.c3r1-e.c3r1)<=r&&Math.abs(t.c3r2-e.c3r2)<=r}},746:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ortho=void 0,e.ortho=function(t,e,r,o){var n=t.width,i=t.height,a=e-r;o[0]=2/n,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1/a,o[11]=0,o[12]=-(t.right+t.left)/n,o[13]=-(t.top+t.bottom)/i,o[14]=-e/a,o[15]=1}},71:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.equals=e.distance2=e.distance=e.midpoint=e.copy=void 0;var o=r(457);function n(t,e){return o.Vec2.length2(o.Vec2.fromPointToPoint(t,e))}e.copy=function(t,e){return void 0===e&&(e={}),e.x=t.x,e.y=t.y,e},e.midpoint=function(t,e,r){return void 0===r&&(r={}),o.Vec2.multiply(o.Vec2.add(t,e,r),.5,r)},e.distance=function(t,e){return Math.sqrt(n(t,e))},e.distance2=n,e.equals=function(t,e,r){return void 0===r&&(r=0),Math.abs(t.x-e.x)<=r&&Math.abs(t.y-e.y)<=r}},523:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;var r=function(){function t(t,e,r,o){this.left=t,this.top=e,this.right=r,this.bottom=o}return t.copy=function(e){return new t(e.left,e.top,e.right,e.bottom)},t.empty=function(){return new t(0,0,0,0)},t.dimensions=function(e,r,o,n){return new t(e,r,e+o,r-n)},Object.defineProperty(t.prototype,"width",{get:function(){return this.right-this.left},set:function(t){this.right=this.left+t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.top-this.bottom},set:function(t){this.bottom=this.top-t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"aspect",{get:function(){return this.width/this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),t.prototype.center=function(t){return void 0===t&&(t={}),t.x=this.centerX,t.y=this.centerY,t},Object.defineProperty(t.prototype,"centerX",{get:function(){return.5*(this.left+this.right)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return.5*(this.bottom+this.top)},enumerable:!1,configurable:!0}),t.prototype.topLeft=function(t){return void 0===t&&(t={}),t.x=this.left,t.y=this.top,t},t.prototype.bottomLeft=function(t){return void 0===t&&(t={}),t.x=this.left,t.y=this.bottom,t},t.prototype.bottomRight=function(t){return void 0===t&&(t={}),t.x=this.right,t.y=this.bottom,t},t.prototype.topRight=function(t){return void 0===t&&(t={}),t.x=this.right,t.y=this.top,t},t.prototype.isEmpty=function(){return this.left>=this.right||this.bottom>=this.top},t.prototype.isValid=function(){return this.right>=this.left&&this.top>=this.bottom},t.prototype.union=function(t){this.left=Math.min(this.left,t.left),this.right=Math.max(this.right,t.right),this.bottom=Math.min(this.bottom,t.bottom),this.top=Math.max(this.top,t.top)},t.prototype.unionPoint=function(t){var e=t.x,r=t.y;this.left=Math.min(e,this.left),this.top=Math.max(r,this.top),this.right=Math.max(e,this.right),this.bottom=Math.min(r,this.bottom)},t.prototype.intersects=function(t){return this.right>=t.left&&t.right>=this.left&&this.top>=t.bottom&&t.top>=this.bottom},t.prototype.intersect=function(t){this.left=Math.max(this.left,t.left),this.right=Math.min(this.right,t.right),this.bottom=Math.max(this.bottom,t.bottom),this.top=Math.min(this.top,t.top)},t.prototype.inset=function(t){var e=t.x,r=t.y;this.left+=e,this.top-=r,this.right-=e,this.bottom+=r},t.prototype.offset=function(t){var e=t.x,r=t.y;this.offsetX(e),this.offsetY(r)},t.prototype.offsetX=function(t){this.left+=t,this.right+=t},t.prototype.offsetY=function(t){this.top+=t,this.bottom+=t},t.prototype.contains=function(t){return this.left<=t.left&&t.right<=this.right&&this.bottom<=t.bottom&&t.top<=this.top},t.prototype.containsPoint=function(t){var e=t.x,r=t.y;return this.containsX(e)&&this.containsY(r)},t.prototype.containsX=function(t){return this.left<=t&&t<=this.right},t.prototype.containsY=function(t){return this.bottom<=t&&t<=this.top},t.prototype.sort=function(){var t=this,e=t.top,r=t.left,o=t.bottom,n=t.right,i=o>e,a=r>n;this.top=i?o:e,this.left=a?n:r,this.bottom=i?e:o,this.right=a?r:n},t.prototype.equals=function(t,e){return void 0===e&&(e=0),Math.abs(this.left-t.left)<=e&&Math.abs(this.top-t.top)<=e&&Math.abs(this.right-t.right)<=e&&Math.abs(this.bottom-t.bottom)<=e},t}();e.Rect=r},768:(t,e)=>{function r(t,e){return Math.floor(Math.random()*(e-t+1))+t}Object.defineProperty(e,"__esModule",{value:!0}),e.randomByte=e.randomInt=e.pad=void 0,e.pad=function(t){return 1==t.length?"0"+t:t},e.randomInt=r,e.randomByte=function(){return r(0,255)}},900:(t,e)=>{function r(t,e,r){return void 0===r&&(r={}),r.x=t.x+e.x,r.y=t.y+e.y,r}function o(t,e,r){var o=t.x,n=t.y;return void 0===r&&(r={}),r.x=o*e,r.y=n*e,r}function n(t,e,r){var o=t.x,n=t.y;return void 0===r&&(r={}),r.x=o/e,r.y=n/e,r}function i(t){return Math.sqrt(a(t))}function a(t){var e=t.x,r=t.y;return e*e+r*r}function c(t,e){return t.x*e.x+t.y*e.y}function s(t,e){return void 0===e&&(e={}),n(t,i(t),e)}function u(t,e){var r=t.x,o=t.y;return void 0===e&&(e={}),e.x=o,e.y=-r,e}function f(t,e,r){var o=t+e,n=t<0?r.left:r.right;return r.containsX(o)?t:n-e}function h(t,e,r){var o=t+e,n=t<0?r.bottom:r.top;return r.containsY(o)?t:n-e}Object.defineProperty(e,"__esModule",{value:!0}),e.equals=e.miter=e.boundY=e.boundX=e.bound=e.fromPointToPoint=e.rotate270=e.rotate180=e.rotate90=e.normalize=e.cross=e.dot=e.length2=e.length=e.divide=e.multiply=e.subtract=e.add=e.copy=void 0,e.copy=function(t,e){return void 0===e&&(e={}),e.x=t.x,e.y=t.y,e},e.add=r,e.subtract=function(t,e,r){return void 0===r&&(r={}),r.x=t.x-e.x,r.y=t.y-e.y,r},e.multiply=o,e.divide=n,e.length=i,e.length2=a,e.dot=c,e.cross=function(t,e){return t.x*e.y-e.x*t.y},e.normalize=s,e.rotate90=u,e.rotate180=function(t,e){var r=t.x,o=t.y;return void 0===e&&(e={}),e.x=-r,e.y=-o,e},e.rotate270=function(t,e){var r=t.x,o=t.y;return void 0===e&&(e={}),e.x=-o,e.y=r,e},e.fromPointToPoint=function(t,e,r){return void 0===r&&(r={}),r.x=e.x-t.x,r.y=e.y-t.y,r},e.bound=function(t,e,r,o){return void 0===o&&(o={}),o.x=f(t.x,e.x,r),o.y=h(t.y,e.y,r),o},e.boundX=f,e.boundY=h,e.miter=function(t,e,n,i,a){void 0===a&&(a={});var f=s(u(t)),h=s(u(e)),p=s(r(f,h));return o(p,Math.min(i,n/c(p,h)),a)},e.equals=function(t,e,r){return void 0===r&&(r=0),Math.abs(t.x-e.x)<=r&&Math.abs(t.y-e.y)<=r}},357:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.PanTool=void 0;var i=r(457),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.wherePointer=function(t){return t.isDown&&1==t.activePointers.length},e.prototype.onPointerDown=function(t){this.previous=t.position},e.prototype.onPointerMove=function(t){var e=t.position,r=t.surface,o=i.Vec2.fromPointToPoint(e,this.previous),n=r.pan(o);i.Vec2.add(n,e,this.previous)},e}(i.PointerEventListener);e.PanTool=a},807:function(t,e,r){var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.PinchZoomTool=void 0;var i=r(457),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.wherePointer=function(t){return t.isDown&&2==t.activePointers.length},e.prototype.onPointerDown=function(t){var e=this.measureLine(t);this.previousSpan=e.length,this.previousFocus=e.midpoint},e.prototype.onPointerMove=function(t){var e=this.measureLine(t),r=e.length/this.previousSpan,o=i.Point.midpoint(e.midpoint,this.previousFocus),n=t.surface.zoomToPoint(r,o);this.previousSpan=e.length/n.scale,this.previousFocus=i.Vec2.add(n.offset,this.previousFocus)},e.prototype.measureLine=function(t){var e=t.activePointers,r=e[0].position,o=e[1].position;return new i.LineSegment(r,o)},e}(i.PointerEventListener);e.PinchZoomTool=a},9:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stroke=void 0;var o=r(457),n=function(){function t(){this.vertices=[]}return t.prototype.moveTo=function(t,e){var r=t.x,o=t.y,n=.5*e,i={x:r,y:o+n},a={x:r,y:o-n};this.vertices.push(i,a)},t.prototype.lineTo=function(t,e){var r=this.vertices.length;if(r<2)throw"Must make a call to moveTo() before making a call to lineTo()";var n=.5*e,i=this.getPreviousPoint(r),a=o.Vec2.fromPointToPoint(i,t),c=null;if(r>=4){var s=this.getPreviousPoint(r-2);c=o.Vec2.fromPointToPoint(s,i),o.Vec2.length(a)<=n&&o.Vec2.length(c)<=n&&(r-=2,i=s,a=o.Vec2.fromPointToPoint(i,t),c=r>=4?this.getPreviousPoint(r-2):null)}var u=o.Vec2.multiply(o.Vec2.normalize(o.Vec2.rotate90(a)),n),f=null!==c&&o.Vec2.length(c)>e/8?o.Vec2.miter(c,a,n,e):u;this.vertices[r-2]=o.Vec2.add(i,f),this.vertices[r-1]=o.Vec2.subtract(i,f),this.vertices[r+0]=o.Vec2.add(t,u),this.vertices[r+1]=o.Vec2.subtract(t,u)},t.prototype.getPreviousPoint=function(t){var e=this.vertices,r=e[t-2],n=e[t-1];return o.Point.midpoint(r,n)},t}();e.Stroke=n},343:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WheelZoomTool=void 0;var r=function(){function t(t){this.scaleFactor=t}return t.prototype.onWheel=function(t){var e=t.deltaY<0?this.scaleFactor:1/this.scaleFactor;t.surface.zoomToPoint(e,t.position)},t}();e.WheelZoomTool=r},994:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;var r=function(){function t(t,e,r){this.fill=t,this.hexagon=e,this.matrices=r}return t.prototype.draw=function(t){var e=t.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.CULL_FACE),e.cullFace(e.BACK),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),this.fill.draw(t,this.hexagon.mesh,this.matrices)},t}();e.Scene=r},432:(t,e,r)=>{var o=r(457),n=r(994),i=document.getElementById("onscreen-canvas"),a=new o.Camera(new o.Rect(-1,1,1,-1),.5,10),c=new o.Renderer(i.getContext("webgl"),a),s=o.PolygonMesh.regularPolygon(6),u=new o.ProgramUtil(c.gl),f=o.Mat2dBuffer.withLength(1),h=new o.PolygonModel(s,f.get(0));o.Mat2d.identity(h.matrix);var p=o.FillProgram.create(u,[s]);p.color=new o.ColorBuffer(new Float32Array([1,1,1,1])),o.ColorF.random(p.color);var l=new n.Scene(p,h,f),d=new o.Surface(i,c,l);d.startRenderLoop(),d.startDetectingWheelEvents().addListener(new o.WheelZoomTool(1.1));var v=d.startDetectingPointerEvents();v.addListener(new o.PanTool),v.addListener(new o.PinchZoomTool)}},e={};!function r(o){if(e[o])return e[o].exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,r),n.exports}(432)})();
//# sourceMappingURL=index.js.map